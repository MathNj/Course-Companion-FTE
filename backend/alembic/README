# Alembic Database Migrations

This directory contains database migration scripts managed by Alembic.

## Creating a New Migration

After making changes to SQLAlchemy models in `app/models/`:

```bash
# Generate migration automatically (recommended)
alembic revision --autogenerate -m "Add user table"

# Or create empty migration manually
alembic revision -m "Add user table"
```

## Running Migrations

```bash
# Upgrade to latest version
alembic upgrade head

# Upgrade by 1 version
alembic upgrade +1

# Downgrade by 1 version
alembic downgrade -1

# Downgrade to specific revision
alembic downgrade <revision_id>
```

## Checking Migration Status

```bash
# Show current revision
alembic current

# Show migration history
alembic history

# Show pending migrations
alembic heads
```

## Directory Structure

```
alembic/
├── versions/          # Migration scripts
│   └── (generated migration files)
├── env.py            # Migration environment configuration
├── script.py.mako    # Migration template
└── README            # This file
```

## Notes

- Migrations are run asynchronously using SQLAlchemy 2.0+ async support
- DATABASE_URL is automatically loaded from environment variables (app.config)
- Always review autogenerated migrations before applying
- Test migrations on development database before production
