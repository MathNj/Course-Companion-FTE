# railway.toml - Railway deployment configuration
# Railway auto-detects Dockerfile, this file is optional

[build]
  builder = "DOCKERFILE"
  dockerfilePath = "Dockerfile.production"

[deploy]
  startCommand = "alembic upgrade head && uvicorn app.main:app --host 0.0.0.0 --port $PORT --workers 2"
  healthcheckPath = "/health"
  healthcheckTimeout = 100
  restartPolicyType = "ON_FAILURE"
  restartPolicyMaxRetries = 10

[[services]]
  name = "web"

  [services.regions]
    default = "us-west1"

# Environment variables to set in Railway dashboard:
# JWT_SECRET_KEY - Your secret key
# APP_ENV - production
# CORS_ORIGINS - https://chat.openai.com,https://chatgpt.com
# LOG_LEVEL - INFO

# Railway will auto-inject:
# DATABASE_URL - From PostgreSQL service
# REDIS_URL - From Redis service
# PORT - Railway assigns automatically
