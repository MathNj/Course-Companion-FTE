{"openapi":"3.1.0","info":{"title":"Course Companion FTE","description":"Digital Full-Time Equivalent Educational Tutor for Generative AI Fundamentals. Phase 1: Zero-Backend-LLM architecture with dual-frontend support (ChatGPT App + Web App).","version":"1.0.0"},"servers":[{"url":"https://course-companion-fte.fly.dev","description":"Production server"}],"paths":{"/":{"get":{"summary":"Root","description":"Root endpoint with API information.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint for monitoring and load balancers.\n\nReturns application health status and component availability.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/register":{"post":{"tags":["Authentication"],"summary":"Register","description":"Register a new user account.\n\nCreates a new user with hashed password and returns authentication tokens.\n\n- **email**: Valid email address (must be unique)\n- **password**: Minimum 8 characters\n- **full_name**: Optional user's full name\n- **timezone**: User's timezone (default: UTC)\n- **preferences**: Optional user preferences dictionary","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Authentication"],"summary":"Login","description":"Authenticate user and return access tokens.\n\nValidates email and password, returns JWT tokens for API access.\n\n- **email**: User's email address\n- **password**: User's password","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["Authentication"],"summary":"Refresh Token","description":"Refresh access token using refresh token.\n\nExchanges a valid refresh token for a new access token and refresh token pair.\n\n- **refresh_token**: Valid JWT refresh token","operationId":"refresh_token_api_v1_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRefresh"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["Authentication"],"summary":"Get Current User Profile","description":"Get current authenticated user's profile.\n\nReturns the authenticated user's complete profile data.\nRequires valid access token in Authorization header.","operationId":"get_current_user_profile_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["Authentication"],"summary":"Update Current User Profile","description":"Update current authenticated user's profile.\n\nAllows updating user's full name, timezone, and preferences.\nRequires valid access token in Authorization header.\n\n- **full_name**: Updated full name (optional)\n- **timezone**: Updated timezone (optional)\n- **preferences**: Updated preferences dictionary (optional)","operationId":"update_current_user_profile_api_v1_auth_me_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/chapters":{"get":{"tags":["Chapters"],"summary":"Get Chapters","description":"Get list of all chapters with user access and progress info.\n\nReturns metadata for all 6 chapters including:\n- Basic info (title, subtitle, difficulty, estimated_time)\n- Access status (user_has_access based on subscription tier)\n- Progress status (completion_status, quiz_score)\n\nRequires authentication.","operationId":"get_chapters_api_v1_chapters_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Response Get Chapters Api V1 Chapters Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/chapters/{chapter_id}":{"get":{"tags":["Chapters"],"summary":"Get Chapter","description":"Get full chapter content by ID.\n\nReturns complete chapter content including:\n- All sections with markdown content\n- Learning objectives\n- Navigation links (next/previous chapters)\n\nAccess Control:\n- Chapters 1-3: Available to all users (free tier)\n- Chapters 4-6: Require premium subscription\n\nReturns 403 Forbidden if user doesn't have access.\nReturns 404 Not Found if chapter doesn't exist.\n\nRequires authentication.","operationId":"get_chapter_api_v1_chapters__chapter_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chapter_id","in":"path","required":true,"schema":{"type":"string","title":"Chapter Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Chapter Api V1 Chapters  Chapter Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chapters/search":{"get":{"tags":["Chapters"],"summary":"Search Chapters","description":"Search across chapter content (Grounded Q&A).\n\nPerforms keyword search across all accessible chapters and returns relevant sections.\nThis enables ChatGPT to answer questions using only course material (zero-hallucination).\n\nQuery parameters:\n- **q**: Search query (minimum 2 characters)\n- **limit**: Maximum number of results (default 20, max 100)\n- **chapter_id**: Optional - limit search to specific chapter\n\nReturns search results with:\n- chapter_id: Which chapter the result is from\n- chapter_title: Chapter title for context\n- section_id: Which section contains the match\n- section_title: Section title for context\n- snippet: Text excerpt with the matched content\n- relevance_score: How well it matches the query (higher is better)\n- match_count: Number of times query terms appear in this section\n\nAccess Control:\n- Only searches chapters the user has access to\n- Free users: chapters 1-3\n- Premium users: all chapters 1-6\n\nRequires authentication.","operationId":"search_chapters_api_v1_chapters_search_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":2,"description":"Search query","title":"Q"},"description":"Search query"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum results to return","default":20,"title":"Limit"},"description":"Maximum results to return"},{"name":"chapter_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Limit search to specific chapter","title":"Chapter Id"},"description":"Limit search to specific chapter"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Search Chapters Api V1 Chapters Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/quizzes/{quiz_id}":{"get":{"tags":["quizzes"],"summary":"Get Quiz","description":"Get quiz content by ID.\n\nReturns quiz questions WITHOUT answer keys or explanations.\nStudents must submit answers to get graded results.","operationId":"get_quiz_api_v1_quizzes__quiz_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"quiz_id","in":"path","required":true,"schema":{"type":"string","title":"Quiz Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Quiz Api V1 Quizzes  Quiz Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/quizzes/{quiz_id}/submit":{"post":{"tags":["quizzes"],"summary":"Submit Quiz","description":"Submit quiz answers for grading.\n\nFlow:\n1. Validate quiz_id and answers format\n2. Fetch quiz content with answer keys\n3. Grade submission using quiz_grader service\n4. Create QuizAttempt record\n5. Update ChapterProgress if quiz passed\n6. Return graded results with explanations","operationId":"submit_quiz_api_v1_quizzes__quiz_id__submit_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"quiz_id","in":"path","required":true,"schema":{"type":"string","title":"Quiz Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuizAttemptCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Submit Quiz Api V1 Quizzes  Quiz Id  Submit Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/progress":{"get":{"tags":["progress"],"summary":"Get Progress","description":"Get comprehensive progress summary for the current user.\n\nReturns:\n- Chapter completion statistics\n- All chapter progress records\n- Streak information\n- Milestone achievements\n- Quiz statistics","operationId":"get_progress_api_v1_progress_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Progress Api V1 Progress Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/progress/streak":{"get":{"tags":["progress"],"summary":"Get Streak Details","description":"Get detailed streak information for the current user.\n\nReturns:\n- Current streak count\n- Longest streak achieved\n- Total active days\n- Last activity date\n- Milestone achievements\n- Progress to next milestone","operationId":"get_streak_details_api_v1_progress_streak_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Streak Details Api V1 Progress Streak Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/progress/chapters/{chapter_id}":{"get":{"tags":["progress"],"summary":"Get Chapter Progress","description":"Get detailed progress for a specific chapter.\n\nArgs:\n    chapter_id: Chapter identifier (e.g., \"chapter-1\")\n\nReturns:\n    Detailed chapter progress including:\n    - Completion percentage\n    - Time spent\n    - Quiz attempts for this chapter\n    - Start and completion timestamps","operationId":"get_chapter_progress_api_v1_progress_chapters__chapter_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chapter_id","in":"path","required":true,"schema":{"type":"string","title":"Chapter Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Chapter Progress Api V1 Progress Chapters  Chapter Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/progress/activity":{"post":{"tags":["progress"],"summary":"Record Learning Activity","description":"Manually record a learning activity to update streak.\n\nThis endpoint allows explicit streak updates when user\nperforms learning activities that don't trigger automatic updates.\n\nReturns:\n    Updated streak information including any achieved milestones","operationId":"record_learning_activity_api_v1_progress_activity_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Record Learning Activity Api V1 Progress Activity Post"}}}}},"security":[{"HTTPBearer":[]}]}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"QuizAttemptCreate":{"properties":{"quiz_id":{"type":"string","maxLength":100,"title":"Quiz Id","description":"Quiz identifier (e.g., 'chapter-1-quiz')"},"answers":{"additionalProperties":true,"type":"object","title":"Answers","description":"User's answers (question_id -> answer mapping)"}},"type":"object","required":["quiz_id"],"title":"QuizAttemptCreate","description":"Schema for creating a quiz attempt.","example":{"answers":{"q1":"option_a","q2":"option_c","q3":"option_b"},"quiz_id":"chapter-1-quiz"}},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token","description":"JWT access token"},"refresh_token":{"type":"string","title":"Refresh Token","description":"JWT refresh token"},"token_type":{"type":"string","title":"Token Type","description":"Token type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In","description":"Access token expiration time in seconds"},"user":{"$ref":"#/components/schemas/UserResponse","description":"Authenticated user data"}},"type":"object","required":["access_token","refresh_token","expires_in","user"],"title":"Token","description":"Schema for JWT token response.","example":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","expires_in":2592000,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","token_type":"bearer","user":{"email":"student@example.com","id":"550e8400-e29b-41d4-a716-446655440000","is_premium":false,"subscription_tier":"free"}}},"TokenRefresh":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token","description":"JWT refresh token"}},"type":"object","required":["refresh_token"],"title":"TokenRefresh","description":"Schema for refreshing access token.","example":{"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User's email address"},"full_name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Full Name","description":"User's full name"},"timezone":{"type":"string","maxLength":50,"title":"Timezone","description":"User's timezone","default":"UTC"},"preferences":{"additionalProperties":true,"type":"object","title":"Preferences","description":"User preferences (UI settings, notifications, etc.)"},"password":{"type":"string","maxLength":100,"minLength":8,"title":"Password","description":"User's password (min 8 characters)"}},"type":"object","required":["email","password"],"title":"UserCreate","description":"Schema for user registration.","example":{"email":"student@example.com","full_name":"Jane Doe","password":"SecurePass123!","preferences":{"notifications":true,"theme":"dark"},"timezone":"America/New_York"}},"UserLogin":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User's email address"},"password":{"type":"string","title":"Password","description":"User's password"}},"type":"object","required":["email","password"],"title":"UserLogin","description":"Schema for user login.","example":{"email":"student@example.com","password":"SecurePass123!"}},"UserResponse":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User's email address"},"full_name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Full Name","description":"User's full name"},"timezone":{"type":"string","maxLength":50,"title":"Timezone","description":"User's timezone","default":"UTC"},"preferences":{"additionalProperties":true,"type":"object","title":"Preferences","description":"User preferences (UI settings, notifications, etc.)"},"id":{"type":"string","format":"uuid","title":"Id","description":"User's unique identifier"},"subscription_tier":{"type":"string","title":"Subscription Tier","description":"Current subscription tier (free/premium/pro)"},"subscription_expires_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Subscription Expires At","description":"Subscription expiration timestamp"},"is_active":{"type":"boolean","title":"Is Active","description":"Whether the user account is active"},"last_active_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Active At","description":"Last activity timestamp"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Account creation timestamp"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Last update timestamp"},"is_premium":{"type":"boolean","title":"Is Premium","description":"Computed: whether user has active premium subscription"}},"type":"object","required":["email","id","subscription_tier","is_active","created_at","updated_at","is_premium"],"title":"UserResponse","description":"Schema for user data in API responses.","example":{"created_at":"2026-01-01T10:00:00Z","email":"student@example.com","full_name":"Jane Doe","id":"550e8400-e29b-41d4-a716-446655440000","is_active":true,"is_premium":true,"last_active_at":"2026-01-24T19:30:00Z","preferences":{"theme":"dark"},"subscription_expires_at":"2026-12-31T23:59:59Z","subscription_tier":"premium","timezone":"America/New_York","updated_at":"2026-01-24T19:30:00Z"}},"UserUpdate":{"properties":{"full_name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Full Name"},"timezone":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Timezone"},"preferences":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Preferences"}},"type":"object","title":"UserUpdate","description":"Schema for updating user profile.","example":{"full_name":"Jane Smith","preferences":{"language":"en","theme":"light"},"timezone":"Europe/London"}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}